<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UtenteRegistratoDAOmySQL.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SitoForzeArmate</a> &gt; <a href="index.source.html" class="el_package">com.progetto.sitoforzearmate.model.dao.MySQL.Utente</a> &gt; <span class="el_source">UtenteRegistratoDAOmySQL.java</span></div><h1>UtenteRegistratoDAOmySQL.java</h1><pre class="source lang-java linenums">package com.progetto.sitoforzearmate.model.dao.MySQL.Utente;

import com.progetto.sitoforzearmate.model.dao.Data;
import com.progetto.sitoforzearmate.model.dao.Utente.UtenteRegistratoDAO;
import com.progetto.sitoforzearmate.model.mo.Bando;
import com.progetto.sitoforzearmate.model.mo.Utente.*;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;
import java.util.Random;

public class UtenteRegistratoDAOmySQL implements UtenteRegistratoDAO {
<span class="nc" id="L15">    private Long Matricola = (long)0;</span>
<span class="nc" id="L16">    private Long StipendioBase = (long)1000;</span>

    Connection connection;
<span class="nc" id="L19">    public UtenteRegistratoDAOmySQL(Connection connection){</span>
<span class="nc" id="L20">        this.connection = connection;</span>
<span class="nc" id="L21">    }</span>
    @Override
    public UtenteRegistrato create(
                /* Attributi Utente */
                String Nome,
                String Cognome,
                String CF,
                String Mail,
                String Telefono,
                String Password,
                String sesso,
                Data dataNascita,

                /* Attributi UtenteRegistrato */
                String Matricola,
                /* Long Stipendio, */
                String IBAN,
                String Ruolo,
                byte[] Foto,
                byte[] Documento,
                String Indirizzo,
                String Locazione_servizio,
                boolean Newsletter,

                List&lt;String&gt; Bandi){

        PreparedStatement statement;
<span class="nc" id="L48">        UtenteRegistrato user = new UtenteRegistrato();</span>

<span class="nc" id="L50">        user.setNome(Nome);</span>
<span class="nc" id="L51">        user.setCognome(Cognome);</span>
<span class="nc" id="L52">        user.setCF(CF);</span>
<span class="nc" id="L53">        user.setMail(Mail);</span>
<span class="nc" id="L54">        user.setTelefono(Telefono);</span>
<span class="nc" id="L55">        user.setPassword(Password);</span>
<span class="nc" id="L56">        user.setSesso(sesso);</span>
<span class="nc" id="L57">        user.setDataNascita(dataNascita);</span>

<span class="nc" id="L59">        Optional&lt;String&gt; Role = Optional.ofNullable(Ruolo);</span>
<span class="nc" id="L60">        user.setMatricola(Matricola);</span>
<span class="nc" id="L61">        user.setRuolo(Ruolo);</span>
        //user.setStipendio(Stipendio);
<span class="nc" id="L63">        user.setIBAN(IBAN);</span>
<span class="nc" id="L64">        user.setFotoByte(Foto);</span>
<span class="nc" id="L65">        user.setDocumentoByte(Documento);</span>
<span class="nc" id="L66">        user.setIndirizzo(Indirizzo);</span>
<span class="nc" id="L67">        user.setIscrittoNewsletter(Newsletter);</span>

<span class="nc" id="L69">        Optional&lt;List&lt;String&gt;&gt; bandi = Optional.ofNullable(Bandi);</span>

<span class="nc" id="L71">        user.setLocazioneServizio(Locazione_servizio);</span>

<span class="nc bnc" id="L73" title="All 4 branches missed.">        if(Role.isPresent() &amp;&amp; !Ruolo.equals(&quot;&quot;)){</span>
<span class="nc bnc" id="L74" title="All 4 branches missed.">            switch(Ruolo){</span>
                case &quot;Ufficiale&quot;:
<span class="nc" id="L76">                    user.setStipendio((long)2*StipendioBase);</span>
<span class="nc" id="L77">                    break;</span>
                case &quot;Sottufficiale&quot;:
<span class="nc" id="L79">                    user.setStipendio((long)1.5*StipendioBase);</span>
<span class="nc" id="L80">                    break;</span>
                case &quot;Graduato&quot;:
<span class="nc" id="L82">                    user.setStipendio(StipendioBase);</span>
                    break;
<span class="nc" id="L84">            }</span>
        }
        else{
<span class="nc" id="L87">            user.setStipendio((long)0);</span>
        }
        try {

<span class="nc" id="L91">            String sql</span>
                    = &quot; SELECT Email &quot;
                    + &quot; FROM utente &quot;
                    + &quot; WHERE  Email = ?&quot;;

<span class="nc" id="L96">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L97">            int i = 1;</span>
            /*
            statement.setString(i++, user.getNome());
            statement.setString(i++, user.getCognome());
            statement.setString(i++, user.getCF());
            statement.setString(i++, user.getTelefono());
             */
<span class="nc" id="L104">            statement.setString(i++, user.getMail());</span>
            /* statement.setString(i++, user.getPassword()); */

<span class="nc" id="L107">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L110">            exist = resultSet.next();</span>
<span class="nc" id="L111">            resultSet.close();</span>
            /* .next restituisce false se la select restituisce dei dati */
            /* si ha quindi che se restituisce true, allora si hanno più utenti con stessa chiave */

<span class="nc bnc" id="L115" title="All 2 branches missed.">            if (exist) {</span>
<span class="nc" id="L116">                throw new RuntimeException(&quot;UtenteRegistratoDAOmySQL.create: Tentativo di inserimento di un utente già esistente.&quot;);</span>
            }

<span class="nc" id="L119">            String sqlUtente =</span>
                    &quot; INSERT INTO utente &quot; +
                    &quot;     ( Nome,        &quot; +
                    &quot;       Cognome,     &quot; +
                    &quot;       CF,          &quot; +
                    &quot;       Telefono,    &quot; +
                    &quot;       Email,       &quot; +
                    &quot;       Password,    &quot; +
                    &quot;       sesso,       &quot; +
                    &quot;       DataNascita  &quot; +
                    &quot;       )            &quot; +
                    &quot;VALUES (?, ?, ?, ?, ?, ?, ?, ?)&quot;;
<span class="nc" id="L131">            statement = connection.prepareStatement(sqlUtente);</span>
<span class="nc" id="L132">            i = 1;</span>
<span class="nc" id="L133">            statement.setString(i++, user.getNome());</span>
<span class="nc" id="L134">            statement.setString(i++, user.getCognome());</span>
<span class="nc" id="L135">            statement.setString(i++, user.getCF());</span>
<span class="nc" id="L136">            statement.setString(i++, user.getTelefono());</span>
<span class="nc" id="L137">            statement.setString(i++, user.getMail());</span>
<span class="nc" id="L138">            statement.setString(i++, user.getPassword());</span>
<span class="nc" id="L139">            statement.setString(i++, user.getSesso());</span>
<span class="nc" id="L140">            statement.setDate(i++, Date.valueOf(user.getDataNascita().toStringSQL()));</span>

<span class="nc" id="L142">            statement.executeUpdate();</span>

<span class="nc" id="L144">            String sqlUtenteRegistrato1 =</span>
                    &quot; INSERT INTO utente_registrato &quot; +
                    &quot;       ( Email,                 &quot; +
                    &quot;         Matricola,            &quot; +
                    &quot;         IBAN,                 &quot; +
                    &quot;         Ruolo,                &quot; +
                    &quot;         Foto,                 &quot; +
                    &quot;         Documenti,            &quot; +
                    &quot;         Indirizzo,            &quot; +
                    &quot;         Locazione_servizio,   &quot; +
                    &quot;         Iscritto_Newsletter   &quot; +
                    &quot;       )                       &quot; +
                    &quot; VALUES (?,?,?,?,?,?,?,?,?)&quot;;
<span class="nc" id="L157">            statement = connection.prepareStatement(sqlUtenteRegistrato1);</span>
<span class="nc" id="L158">            i = 1;</span>
<span class="nc" id="L159">            statement.setString(i++, user.getMail());</span>
<span class="nc" id="L160">            statement.setString(i++, user.getMatricola());</span>
<span class="nc" id="L161">            statement.setString(i++, user.getIBAN());</span>
<span class="nc" id="L162">            statement.setString(i++, user.getRuolo());</span>
<span class="nc" id="L163">            statement.setBlob(i++, user.getFoto(), user.getFotoDim());</span>
<span class="nc" id="L164">            statement.setBlob(i++, user.getDocumento(), user.getDocumentoDim());</span>
<span class="nc" id="L165">            statement.setString(i++, user.getIndirizzo());</span>
<span class="nc" id="L166">            statement.setString(i++, user.getLocazioneServizio());</span>
<span class="nc" id="L167">            statement.setInt(i++, user.getIscrittoNewsletterInt());</span>

<span class="nc" id="L169">            statement.executeUpdate();</span>
<span class="nc" id="L170">            statement.close();</span>

<span class="nc bnc" id="L172" title="All 2 branches missed.">            if(user.getRuolo() != null){</span>
<span class="nc" id="L173">                addContatto(user.getMatricola());</span>
<span class="nc" id="L174">                createBadge(user.getMatricola());</span>
            }
        }
<span class="nc" id="L177">        catch(SQLException e) {</span>
<span class="nc" id="L178">            throw new RuntimeException(e);</span>
<span class="nc" id="L179">        }</span>
<span class="nc" id="L180">        return user;</span>
    }

    @Override
    public void update(UtenteRegistrato user){
        PreparedStatement statement;

        try {

<span class="nc" id="L189">            String sql</span>
                    = &quot; SELECT Email &quot;
                    + &quot; FROM utente &quot;
                    + &quot; WHERE &quot;
                    + &quot; Nome = ? AND&quot;
                    + &quot; Cognome = ? AND&quot;
                    + &quot; CF = ? AND&quot;
                    + &quot; Telefono = ? AND &quot;
                    + &quot; Email &lt;&gt; ? AND &quot;
                    + &quot; Password = ? AND&quot;
                    + &quot; sesso = ? AND&quot;
                    + &quot; DataNascita = ?&quot;;
            /* Si controlla se si ha uno stesso utente con due mail differenti. In caso eccezione */

<span class="nc" id="L203">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L204">            int i = 1;</span>
<span class="nc" id="L205">            statement.setString(i++, user.getNome());</span>
<span class="nc" id="L206">            statement.setString(i++, user.getCognome());</span>
<span class="nc" id="L207">            statement.setString(i++, user.getCF());</span>
<span class="nc" id="L208">            statement.setString(i++, user.getTelefono());</span>
<span class="nc" id="L209">            statement.setString(i++, user.getMail());</span>
<span class="nc" id="L210">            statement.setString(i++, user.getPassword());</span>
<span class="nc" id="L211">            statement.setString(i++, user.getSesso());</span>
<span class="nc" id="L212">            statement.setDate(i++, Date.valueOf(user.getDataNascita().toStringSQL()));</span>

<span class="nc" id="L214">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L217">            exist = resultSet.next();</span>
<span class="nc" id="L218">            resultSet.close();</span>

<span class="nc bnc" id="L220" title="All 2 branches missed.">            if (exist) {</span>
                // throw new DuplicatedObjectException(&quot;ContactDAOJDBCImpl.create: Tentativo di aggiornamento in un contatto già esistente.&quot;);
<span class="nc" id="L222">                throw new RuntimeException(&quot;Aggiornamento contatto già esistente&quot;);</span>
            }

<span class="nc" id="L225">            sql</span>
                    = &quot; UPDATE utente &quot;
                    + &quot; SET &quot;
                    + &quot;   Nome = ?, &quot;
                    + &quot;   Cognome = ?, &quot;
                    + &quot;   CF = ?, &quot;
                    + &quot;   Telefono = ?, &quot;
                    + &quot;   Password = ?, &quot;
                    + &quot;   sesso = ?, &quot;
                    + &quot;   DataNascita = ? &quot;
                    + &quot; WHERE &quot;
                    + &quot;   Email = ? &quot;;

<span class="nc" id="L238">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L239">            i = 1;</span>
<span class="nc" id="L240">            statement.setString(i++, user.getNome());</span>
<span class="nc" id="L241">            statement.setString(i++, user.getCognome());</span>
<span class="nc" id="L242">            statement.setString(i++, user.getCF());</span>
<span class="nc" id="L243">            statement.setString(i++, user.getTelefono());</span>
<span class="nc" id="L244">            statement.setString(i++, user.getPassword());</span>
<span class="nc" id="L245">            statement.setString(i++, user.getSesso());</span>
<span class="nc" id="L246">            statement.setDate(i++, Date.valueOf(user.getDataNascita().toStringSQL()));</span>
<span class="nc" id="L247">            statement.setString(i++, user.getMail());</span>

<span class="nc" id="L249">            statement.executeUpdate();</span>

<span class="nc" id="L251">            String sqlUtenteRegistrato =</span>
                    &quot; UPDATE utente_registrato &quot; +
                            &quot;       SET                         &quot; +
                            &quot;         Email = ?,                &quot; +
                            &quot;         IBAN = ?,                 &quot; +
                            &quot;         Ruolo = ?,                &quot; +
                            &quot;         Foto = ?,                 &quot; +
                            &quot;         Documenti = ?,            &quot; +
                            &quot;         Indirizzo = ?,            &quot; +
                            &quot;         Locazione_servizio = ?,   &quot; +
                            &quot;         Iscritto_Newsletter = ?   &quot; +
                            &quot;       WHERE                       &quot; +
                            &quot;         Matricola = ?                  &quot;;
<span class="nc" id="L264">            statement = connection.prepareStatement(sqlUtenteRegistrato);</span>
<span class="nc" id="L265">            i = 1;</span>
<span class="nc" id="L266">            statement.setString(i++, user.getMail());</span>
<span class="nc" id="L267">            statement.setString(i++, user.getIBAN());</span>
<span class="nc" id="L268">            statement.setString(i++, user.getRuolo());</span>
<span class="nc" id="L269">            statement.setBlob(i++, user.getFoto(), user.getFotoDim());</span>
<span class="nc" id="L270">            statement.setBlob(i++, user.getDocumento(), user.getDocumentoDim());</span>
<span class="nc" id="L271">            statement.setString(i++, user.getIndirizzo());</span>
<span class="nc" id="L272">            statement.setString(i++, user.getLocazioneServizio());</span>
<span class="nc" id="L273">            statement.setInt(i++, user.getIscrittoNewsletterInt());</span>
<span class="nc" id="L274">            statement.setString(i++, user.getMatricola());</span>

<span class="nc" id="L276">            statement.executeUpdate();</span>
<span class="nc" id="L277">            statement.close();</span>

<span class="nc" id="L279">        } catch (SQLException e) {</span>
<span class="nc" id="L280">            throw new RuntimeException(e);</span>
<span class="nc" id="L281">        }</span>
<span class="nc" id="L282">    }</span>

    @Override
    public void delete(UtenteRegistrato user){
        PreparedStatement statement;

        try{
<span class="nc" id="L289">            String sql</span>
                    = &quot;DELETE &quot;
                    + &quot;FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot;WHERE Matricola = ?&quot;;

<span class="nc" id="L294">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L295">            statement.setString(1, user.getMatricola());</span>
<span class="nc" id="L296">            statement.executeUpdate();</span>
<span class="nc" id="L297">            statement.close();</span>
        }
<span class="nc" id="L299">        catch(SQLException e){</span>
<span class="nc" id="L300">            throw new RuntimeException(e);</span>
<span class="nc" id="L301">        }</span>
<span class="nc" id="L302">    }</span>

    @Override
    public UtenteRegistrato findByMatricola(String Matricola){
<span class="nc" id="L306">        UtenteRegistrato user = null;</span>
        PreparedStatement statement;

        try{
<span class="nc" id="L310">            String sql</span>
                    = &quot; SELECT * &quot;
                    + &quot; FROM utente AS u JOIN utente_registrato AS ur ON u.Email = ur.Email&quot;
                    + &quot; WHERE Matricola = ?&quot;;

<span class="nc" id="L315">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L316">            statement.setString(1, Matricola);</span>

<span class="nc" id="L318">            ResultSet resultSet = statement.executeQuery();</span>

<span class="nc bnc" id="L320" title="All 2 branches missed.">            if(resultSet.next()){</span>
<span class="nc" id="L321">                user = readUtente(resultSet);</span>
            }

<span class="nc" id="L324">            resultSet.close();</span>
<span class="nc" id="L325">            statement.close();</span>
        }
<span class="nc" id="L327">        catch (SQLException e){</span>
<span class="nc" id="L328">            throw new RuntimeException(e);</span>
<span class="nc" id="L329">        }</span>

<span class="nc" id="L331">        return user;</span>
    }

    @Override
    public UtenteRegistrato findByMail(String mail){
<span class="nc" id="L336">        UtenteRegistrato user = null;</span>
        PreparedStatement statement;

        try{
<span class="nc" id="L340">            String sql</span>
                    = &quot; SELECT * &quot;
                    + &quot; FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot; WHERE Email = ? &quot;;

<span class="nc" id="L345">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L346">            statement.setString(1, mail);</span>

<span class="nc" id="L348">            ResultSet resultSet = statement.executeQuery();</span>

<span class="nc bnc" id="L350" title="All 2 branches missed.">            if(resultSet.next()){</span>
<span class="nc" id="L351">                user = readUtente(resultSet);</span>
            }

<span class="nc" id="L354">            resultSet.close();</span>
<span class="nc" id="L355">            statement.close();</span>
        }
<span class="nc" id="L357">        catch (SQLException e){</span>
<span class="nc" id="L358">            throw new RuntimeException(e);</span>
<span class="nc" id="L359">        }</span>

<span class="nc" id="L361">        return user;</span>
    }

    @Override
    public boolean isDeleted(UtenteRegistrato user){
        PreparedStatement statement;

        try {
<span class="nc" id="L369">            String sql</span>
                    = &quot; SELECT Matricola&quot;
                    + &quot; FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot; WHERE &quot;
                    + &quot; Matricola = ?&quot;;

<span class="nc" id="L375">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L377">            statement.setString(1, user.getMatricola());</span>
<span class="nc" id="L378">            ResultSet resultSet = statement.executeQuery();</span>

<span class="nc bnc" id="L380" title="All 2 branches missed.">            if(resultSet.next()){</span>
<span class="nc" id="L381">                user = readUtente(resultSet);</span>
            }

<span class="nc" id="L384">            resultSet.close();</span>
<span class="nc" id="L385">            statement.close();</span>

<span class="nc bnc" id="L387" title="All 2 branches missed.">            if(user == null) {</span>
<span class="nc" id="L388">                return true;</span>
            }
<span class="nc" id="L390">            else return false;</span>
        }
<span class="nc" id="L392">        catch(SQLException e){</span>
<span class="nc" id="L393">            throw new RuntimeException(e);</span>
        }
    }

    @Override
    public void iscrizioneBando(UtenteRegistrato user, Bando bando) {
        PreparedStatement statement;
        try {

<span class="nc" id="L402">            String sql</span>
                    = &quot; SELECT Matricola, Id_bando &quot;
                    + &quot; FROM partecipa &quot;
                    + &quot; WHERE &quot;
                    + &quot; Matricola = ? AND     &quot;
                    + &quot; Id_bando = ?          &quot;;

<span class="nc" id="L409">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L411">            statement.setString(1, user.getMatricola());</span>
<span class="nc" id="L412">            statement.setString(2, bando.getId());</span>

<span class="nc" id="L414">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L417">            exist = resultSet.next();</span>
<span class="nc" id="L418">            resultSet.close();</span>

<span class="nc bnc" id="L420" title="All 2 branches missed.">            if (exist) {</span>
                // throw new DuplicatedObjectException(&quot;ContactDAOJDBCImpl.create: Tentativo di aggiornamento in un contatto già esistente.&quot;);
<span class="nc" id="L422">                throw new RuntimeException(&quot;Aggiornamento contatto già esistente&quot;);</span>
            }

<span class="nc" id="L425">            String sqlPartecipa =</span>
                    &quot; INSERT INTO partecipa &quot; +
                            &quot;       (Matricola,                 &quot; +
                            &quot;        Id_bando            &quot; +
                            &quot;       )                       &quot; +
                            &quot; VALUES (?,?)&quot;;
<span class="nc" id="L431">            statement = connection.prepareStatement(sqlPartecipa);</span>

<span class="nc" id="L433">            statement.setString(1, user.getMatricola());</span>
<span class="nc" id="L434">            statement.setString(2, bando.getId());</span>

<span class="nc" id="L436">            statement.executeUpdate();</span>

<span class="nc" id="L438">            String sqlAggiorna =</span>
                    &quot; UPDATE bando &quot; +
                            &quot; SET Numero_partecipanti = ? &quot; +
                            &quot; WHERE Id = ? &quot;;
<span class="nc" id="L442">            statement = connection.prepareStatement(sqlAggiorna);</span>

<span class="nc" id="L444">            statement.setInt(1, (bando.getNumPartecipanti()));</span>
<span class="nc" id="L445">            statement.setString(2, bando.getId());</span>

<span class="nc" id="L447">            statement.executeUpdate();</span>
<span class="nc" id="L448">            statement.close();</span>

<span class="nc" id="L450">        } catch (SQLException e) {</span>
<span class="nc" id="L451">            throw new RuntimeException(e);</span>
<span class="nc" id="L452">        }</span>
<span class="nc" id="L453">    }</span>

    public boolean maxIscrittiRaggiunto(Bando bando){
        PreparedStatement statement;
<span class="nc" id="L457">        boolean maxRaggiunto = false;</span>

        try {
<span class="nc" id="L460">            String controllo</span>
                    = &quot; SELECT Numero_partecipanti, N_max_iscritti &quot;
                    + &quot; FROM bando &quot;
                    + &quot; WHERE Id = ? &quot;;

<span class="nc" id="L465">            statement = connection.prepareStatement(controllo);</span>
<span class="nc" id="L466">            statement.setString(1, bando.getId());</span>

<span class="nc" id="L468">            ResultSet resultSetControllo = statement.executeQuery();</span>
<span class="nc" id="L469">            resultSetControllo.next();</span>

<span class="nc bnc" id="L471" title="All 2 branches missed.">            if (resultSetControllo.getInt(&quot;Numero_partecipanti&quot;) == resultSetControllo.getInt(&quot;N_max_iscritti&quot;)) {</span>
<span class="nc" id="L472">                maxRaggiunto = true;</span>
            }
<span class="nc" id="L474">            resultSetControllo.close();</span>
<span class="nc" id="L475">            statement.close();</span>

        }
<span class="nc" id="L478">        catch (SQLException e){</span>
<span class="nc" id="L479">            throw new RuntimeException(e);</span>
<span class="nc" id="L480">        }</span>
<span class="nc" id="L481">        return maxRaggiunto;</span>
    }

    @Override
    public List&lt;String&gt; recuperaBandi(String Matricola){
<span class="nc" id="L486">        List&lt;String&gt; bandi = new ArrayList&lt;&gt;();</span>

        PreparedStatement statement;

        try{
<span class="nc" id="L491">            String sqlBando</span>
                    = &quot; SELECT Id_bando &quot;
                    + &quot; FROM partecipa &quot;
                    + &quot; WHERE Matricola = ?&quot;;

<span class="nc" id="L496">            statement = connection.prepareStatement(sqlBando);</span>

<span class="nc" id="L498">            statement.setString(1, Matricola);</span>

<span class="nc" id="L500">            ResultSet resultSet = statement.executeQuery();</span>

<span class="nc bnc" id="L502" title="All 2 branches missed.">            while(resultSet.next()){</span>
<span class="nc" id="L503">                bandi.add(resultSet.getString(&quot;Id_bando&quot;));</span>
            }

<span class="nc" id="L506">            resultSet.close();</span>
<span class="nc" id="L507">            statement.close();</span>
        }
<span class="nc" id="L509">        catch(SQLException e){</span>
<span class="nc" id="L510">            throw new RuntimeException(e);</span>
<span class="nc" id="L511">        }</span>

<span class="nc" id="L513">        return bandi;</span>
    }

    @Override
    public void annullaIscrizione(UtenteRegistrato user, Bando bando){
        PreparedStatement statement;

        try{
<span class="nc" id="L521">            String sql</span>
                    = &quot;DELETE &quot;
                    + &quot;FROM partecipa &quot;
                    + &quot;WHERE Matricola = ? AND&quot;
                    + &quot;      Id_bando = ?&quot;;

<span class="nc" id="L527">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L528">            statement.setString(1, user.getMatricola());</span>
<span class="nc" id="L529">            statement.setString(2, bando.getId());</span>

<span class="nc" id="L531">            statement.executeUpdate();</span>

<span class="nc" id="L533">            String sqlAggiorna =</span>
                    &quot; UPDATE bando &quot; +
                            &quot; SET Numero_partecipanti = ? &quot; +
                            &quot; WHERE Id = ? &quot;;
<span class="nc" id="L537">            statement = connection.prepareStatement(sqlAggiorna);</span>
<span class="nc" id="L538">            statement.setInt(1, (bando.getNumPartecipanti()));</span>
<span class="nc" id="L539">            statement.setString(2, bando.getId());</span>

<span class="nc" id="L541">            statement.executeUpdate();</span>
<span class="nc" id="L542">            statement.close();</span>
        }
<span class="nc" id="L544">        catch(SQLException e){</span>
<span class="nc" id="L545">            throw new RuntimeException(e);</span>
<span class="nc" id="L546">        }</span>
<span class="nc" id="L547">    }</span>

    @Override
    public void iscrizioneNewsletter(String MailUtente){
        PreparedStatement statement;

        try{
<span class="nc" id="L554">            String sqlAvvisi</span>
                    = &quot; SELECT Iscritto_Newsletter &quot;
                    + &quot; FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot; WHERE Email = ? AND Iscritto_Newsletter != 1&quot;;

<span class="nc" id="L559">            statement = connection.prepareStatement(sqlAvvisi);</span>

<span class="nc" id="L561">            statement.setString(1, MailUtente);</span>
<span class="nc" id="L562">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L565">            exist = resultSet.next();</span>
<span class="nc" id="L566">            resultSet.close();</span>

<span class="nc bnc" id="L568" title="All 2 branches missed.">            if (exist) {</span>
<span class="nc" id="L569">                throw new RuntimeException(&quot;Già iscritto alla newsletter&quot;);</span>
            }

<span class="nc" id="L572">            String sql</span>
                    = &quot; UPDATE utente_registrato &quot;
                    + &quot; SET &quot;
                    + &quot;   Iscritto_newsletter = ? &quot;
                    + &quot; WHERE &quot;
                    + &quot;   Email = ? &quot;;

<span class="nc" id="L579">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L581">            statement.setInt(1, '1');</span>
<span class="nc" id="L582">            statement.setString(2, MailUtente);</span>

<span class="nc" id="L584">            statement.executeUpdate();</span>

<span class="nc" id="L586">            statement.close();</span>
        }
<span class="nc" id="L588">        catch(SQLException e){</span>
<span class="nc" id="L589">            throw new RuntimeException(e);</span>
<span class="nc" id="L590">        }</span>
<span class="nc" id="L591">    }</span>

    @Override
    public void annullaIscrizione(String MailUtente){
        PreparedStatement statement;

        try{
<span class="nc" id="L598">            String sqlAvvisi</span>
                    = &quot; SELECT Iscritto_Newsletter &quot;
                    + &quot; FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot; WHERE Email = ? AND Iscritto_Newsletter != 0&quot;;

<span class="nc" id="L603">            statement = connection.prepareStatement(sqlAvvisi);</span>

<span class="nc" id="L605">            statement.setString(1, MailUtente);</span>
<span class="nc" id="L606">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L609">            exist = resultSet.next();</span>
<span class="nc" id="L610">            resultSet.close();</span>

<span class="nc bnc" id="L612" title="All 2 branches missed.">            if (exist) {</span>
<span class="nc" id="L613">                throw new RuntimeException(&quot;Non è iscritto alla newsletter&quot;);</span>
            }

<span class="nc" id="L616">            String sql</span>
                    = &quot; UPDATE utente_registrato &quot;
                    + &quot; SET &quot;
                    + &quot;   Iscritto_newsletter = ? &quot;
                    + &quot; WHERE &quot;
                    + &quot;   Email = ? &quot;;

<span class="nc" id="L623">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L625">            statement.setInt(1, '0');</span>
<span class="nc" id="L626">            statement.setString(2, MailUtente);</span>

<span class="nc" id="L628">            statement.executeUpdate();</span>

<span class="nc" id="L630">            statement.close();</span>
        }
<span class="nc" id="L632">        catch(SQLException e){</span>
<span class="nc" id="L633">            throw new RuntimeException(e);</span>
<span class="nc" id="L634">        }</span>
<span class="nc" id="L635">    }</span>

    @Override
    public boolean isIscritto(String MailUtente){
        PreparedStatement statement;
        try {
<span class="nc" id="L641">            String sqlAvvisi</span>
                    = &quot; SELECT Iscritto_Newsletter &quot;
                    + &quot; FROM utente NATURAL JOIN utente_registrato &quot;
                    + &quot; WHERE Email = ? AND Iscritto_Newsletter == 1&quot;;

<span class="nc" id="L646">            statement = connection.prepareStatement(sqlAvvisi);</span>

<span class="nc" id="L648">            statement.setString(1, MailUtente);</span>
<span class="nc" id="L649">            ResultSet resultSet = statement.executeQuery();</span>

            boolean exist;
<span class="nc" id="L652">            exist = resultSet.next();</span>
<span class="nc" id="L653">            resultSet.close();</span>
<span class="nc" id="L654">            return exist;</span>
        }
<span class="nc" id="L656">        catch(SQLException e){</span>
<span class="nc" id="L657">            throw new RuntimeException(e);</span>
        }
    }

    public List&lt;UtenteRegistrato&gt; getUtentiNewsletter(){
<span class="nc" id="L662">        List&lt;UtenteRegistrato&gt; MatricolaUtenti = new ArrayList&lt;&gt;();</span>

        PreparedStatement statement;
        try {
<span class="nc" id="L666">            String sql =</span>
                    &quot; SELECT * &quot; +
                    &quot; FROM utente_registrato&quot; +
                    &quot; WHERE Iscritto_Newsletter = 1 &quot;;

<span class="nc" id="L671">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L673">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc bnc" id="L674" title="All 2 branches missed.">            while(resultSet.next()) {</span>
<span class="nc" id="L675">                MatricolaUtenti.add(readUtente(resultSet));</span>
            }
        }
<span class="nc" id="L678">        catch(SQLException e){</span>
<span class="nc" id="L679">            throw new RuntimeException(e);</span>
<span class="nc" id="L680">        }</span>
<span class="nc" id="L681">        return MatricolaUtenti;</span>
    }

    @Override
    public String getLastMatricola(){
        PreparedStatement statement;
        try {
<span class="nc" id="L688">            String sql</span>
                    =   &quot; SELECT Matricola &quot; +
                        &quot; FROM utente_registrato&quot; +
                        &quot; WHERE Matricola &gt;= ALL(SELECT Matricola &quot; +
                                                &quot;FROM utente_registrato)&quot;;

<span class="nc" id="L694">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L696">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc" id="L697">            resultSet.next();</span>

<span class="nc" id="L699">            return resultSet.getString(&quot;Matricola&quot;);</span>
        }
<span class="nc" id="L701">        catch(SQLException e){</span>
<span class="nc" id="L702">            throw new RuntimeException(e);</span>
        }
    }


    private void addContatto(String MatricolaContatto){
<span class="nc" id="L708">        List&lt;String&gt; UtentiRegistrati = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L709">        UtentiRegistrati.addAll(getUtentiArruolati());</span>

        PreparedStatement statement;

<span class="nc bnc" id="L713" title="All 2 branches missed.">        for(int k=0; k&lt;UtentiRegistrati.size(); k++){</span>
            try {
<span class="nc" id="L715">                String Matricola_utente = UtentiRegistrati.get(k);</span>

<span class="nc" id="L717">                String sql</span>
                        = &quot; SELECT Matricola_contatto &quot;
                        + &quot; FROM rubrica &quot;
                        + &quot; WHERE  Matricola_contatto = ? AND&quot;
                        + &quot;        Matricola_utente = ?&quot;;

<span class="nc" id="L723">                statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L724">                statement.setString(1, MatricolaContatto);</span>
<span class="nc" id="L725">                statement.setString(2, Matricola_utente);</span>

<span class="nc" id="L727">                ResultSet resultSet = statement.executeQuery();</span>

                boolean exist;
<span class="nc" id="L730">                exist = resultSet.next();</span>
<span class="nc" id="L731">                resultSet.close();</span>
                /* .next restituisce false se la select restituisce dei dati */
                /* si ha quindi che se restituisce true, allora si hanno più utenti con stessa chiave */

<span class="nc bnc" id="L735" title="All 2 branches missed.">                if (exist) {</span>
<span class="nc" id="L736">                    throw new RuntimeException(&quot;UtenteRegistratoDAOmySQL.create: Tentativo di inserimento di un contatto già esistente.&quot;);</span>
                }
<span class="nc bnc" id="L738" title="All 2 branches missed.">                if(!Matricola_utente.equals(MatricolaContatto)) {</span>
<span class="nc" id="L739">                    String sqlUtente =</span>
                            &quot; INSERT INTO rubrica &quot; +
                                    &quot;     ( Matricola_utente,  &quot; +
                                    &quot;       Matricola_contatto &quot; +
                                    &quot;       )            &quot; +
                                    &quot;VALUES (?, ?)&quot;;
<span class="nc" id="L745">                    statement = connection.prepareStatement(sqlUtente);</span>

<span class="nc" id="L747">                    statement.setString(1, Matricola_utente);</span>
<span class="nc" id="L748">                    statement.setString(2, MatricolaContatto);</span>

<span class="nc" id="L750">                    statement.executeUpdate();</span>

<span class="nc" id="L752">                    String sqlContatto =</span>
                            &quot; INSERT INTO rubrica &quot; +
                                    &quot;     ( Matricola_utente,  &quot; +
                                    &quot;       Matricola_contatto &quot; +
                                    &quot;       )            &quot; +
                                    &quot;VALUES (?, ?)&quot;;
<span class="nc" id="L758">                    statement = connection.prepareStatement(sqlContatto);</span>

<span class="nc" id="L760">                    statement.setString(1, MatricolaContatto);</span>
<span class="nc" id="L761">                    statement.setString(2, Matricola_utente);</span>

<span class="nc" id="L763">                    statement.executeUpdate();</span>
<span class="nc" id="L764">                    statement.close();</span>
                }
            }
<span class="nc" id="L767">            catch(SQLException e) {</span>
<span class="nc" id="L768">                throw new RuntimeException(e);</span>
<span class="nc" id="L769">            }</span>
        }
<span class="nc" id="L771">    }</span>


    private List&lt;String&gt; getUtentiArruolati(){
<span class="nc" id="L775">        List&lt;String&gt; MatricolaUtenti = new ArrayList&lt;&gt;();</span>

        PreparedStatement statement;
        try {
<span class="nc" id="L779">            String sql</span>
                =   &quot; SELECT Matricola &quot; +
                    &quot; FROM utente_registrato&quot; +
                    &quot; WHERE Ruolo &lt;&gt; 'NULL' &quot;;

<span class="nc" id="L784">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L786">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc bnc" id="L787" title="All 2 branches missed.">            while(resultSet.next()) {</span>
<span class="nc" id="L788">                MatricolaUtenti.add(resultSet.getString(&quot;Matricola&quot;));</span>
            }
        }
<span class="nc" id="L791">        catch(SQLException e){</span>
<span class="nc" id="L792">            throw new RuntimeException(e);</span>
<span class="nc" id="L793">        }</span>
<span class="nc" id="L794">        return MatricolaUtenti;</span>

    }

    @Override
    public List&lt;String&gt; ElencoIniziali(UtenteRegistrato user){
        PreparedStatement statement;
<span class="nc" id="L801">        List&lt;String&gt; listaIniziali = new ArrayList&lt;&gt;();</span>
        try{
<span class="nc" id="L803">            String sql =</span>
                    &quot; SELECT DISTINCT UPPER(LEFT(utente.Cognome, 1)) AS iniziale &quot; +
                    &quot; FROM rubrica JOIN utente_registrato ON Matricola_contatto = Matricola &quot; +
                    &quot; NATURAL JOIN utente &quot; +
                    &quot; WHERE Matricola_utente = ? &quot; +
                    &quot; ORDER BY iniziale ASC &quot;;

<span class="nc" id="L810">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L811">            statement.setString(1, user.getMatricola());</span>

<span class="nc" id="L813">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc bnc" id="L814" title="All 2 branches missed.">            while(resultSet.next()){</span>
<span class="nc" id="L815">                listaIniziali.add(resultSet.getString(&quot;iniziale&quot;));</span>
            }

<span class="nc" id="L818">            statement.close();</span>
        }
<span class="nc" id="L820">        catch(SQLException e){</span>
<span class="nc" id="L821">            throw new RuntimeException(e);</span>
<span class="nc" id="L822">        }</span>
<span class="nc" id="L823">        return listaIniziali;</span>
    }

    @Override
    public List&lt;UtenteRegistrato&gt; cercaIniziale(String Matricola, String Iniziale){
<span class="nc" id="L828">        List&lt;UtenteRegistrato&gt; contatti = new ArrayList&lt;&gt;();</span>
        PreparedStatement statement;
        try{
<span class="nc" id="L831">            String sql =</span>
                      &quot; SELECT *  &quot;
                    + &quot; FROM rubrica JOIN utente_registrato ON Matricola_contatto = Matricola &quot;
                    + &quot; NATURAL JOIN utente &quot;
                    + &quot; WHERE Matricola_utente = ? &quot;;

<span class="nc bnc" id="L837" title="All 4 branches missed.">            if((Iniziale == null) || !(Iniziale.equals(&quot;*&quot;))){</span>
<span class="nc" id="L838">                sql += &quot; AND UPPER(LEFT(utente.Cognome, 1)) = ? &quot;;</span>
            }

<span class="nc" id="L841">            sql += &quot; ORDER BY utente.Nome, utente.Cognome&quot;;</span>

<span class="nc" id="L843">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L844">            statement.setString(1, Matricola);</span>
<span class="nc bnc" id="L845" title="All 4 branches missed.">            if(Iniziale == null || !(Iniziale.equals(&quot;*&quot;))) statement.setString(2, Iniziale);</span>

<span class="nc" id="L847">            ResultSet resultSet = statement.executeQuery();</span>

<span class="nc" id="L849">            int i=0;</span>
<span class="nc bnc" id="L850" title="All 2 branches missed.">            while (resultSet.next()) {</span>
<span class="nc" id="L851">                contatti.add(readUtente(resultSet));</span>
<span class="nc" id="L852">                i++;</span>
            }

<span class="nc" id="L855">            resultSet.close();</span>
<span class="nc" id="L856">            statement.close();</span>


        }
<span class="nc" id="L860">        catch (SQLException e){</span>
<span class="nc" id="L861">            throw new RuntimeException(e);</span>
<span class="nc" id="L862">        }</span>

<span class="nc" id="L864">        return contatti;</span>
    }

    @Override
    public Badge getBadge(String Matricola){
<span class="nc" id="L869">        Badge badge = new Badge();</span>
        PreparedStatement statement;
        try {
<span class="nc" id="L872">            String sql =</span>
                    &quot; SELECT * &quot; +
                    &quot; FROM badge &quot; +
                    &quot; WHERE Matricola = ? &quot;;

<span class="nc" id="L877">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L878">            statement.setString(1, Matricola);</span>

<span class="nc" id="L880">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc" id="L881">            resultSet.next();</span>
<span class="nc" id="L882">            badge.setId(resultSet.getString(&quot;Id&quot;));</span>
<span class="nc" id="L883">            badge.setOreLavorative(resultSet.getLong(&quot;Ore_di_lavoro&quot;));</span>
        }
<span class="nc" id="L885">        catch(SQLException e){</span>
<span class="nc" id="L886">            throw new RuntimeException(e);</span>
<span class="nc" id="L887">        }</span>
<span class="nc" id="L888">        return badge;</span>
    }

    private void createBadge(String Matricola){
        PreparedStatement statement;
        try {
<span class="nc" id="L894">            String sql =</span>
                    &quot; INSERT INTO badge(Matricola, Id, Ore_di_lavoro) &quot; +
                    &quot; VALUES(?, ?, ?) &quot;;

<span class="nc" id="L898">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L899">            statement.setString(1, Matricola);</span>

<span class="nc" id="L901">            Random random = new Random();</span>
<span class="nc" id="L902">            Integer IdRandom = random.nextInt(900) + 100;   // random.nextInt(900) genera un numero tra 0 e 899, poi si aggiunge 100</span>
<span class="nc" id="L903">            String IdBadge = IdRandom.toString();</span>

<span class="nc" id="L905">            statement.setString(2, IdBadge);</span>
<span class="nc" id="L906">            statement.setLong(3, 0);</span>

<span class="nc" id="L908">            statement.executeUpdate();</span>
<span class="nc" id="L909">            statement.close();</span>
        }
<span class="nc" id="L911">        catch(SQLException e){</span>
<span class="nc" id="L912">            throw new RuntimeException(e);</span>
<span class="nc" id="L913">        }</span>

<span class="nc" id="L915">    }</span>
    @Override
    public List&lt;UtenteRegistrato&gt; getUtenti(){
<span class="nc" id="L918">        List&lt;UtenteRegistrato&gt; MatricolaUtenti = new ArrayList&lt;&gt;();</span>

        PreparedStatement statement;
        try {
<span class="nc" id="L922">            String sql =</span>
                    &quot; SELECT * &quot; +
                    &quot; FROM utente_registrato NATURAL JOIN utente &quot;;

<span class="nc" id="L926">            statement = connection.prepareStatement(sql);</span>

<span class="nc" id="L928">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc bnc" id="L929" title="All 2 branches missed.">            while(resultSet.next()) {</span>
<span class="nc" id="L930">                MatricolaUtenti.add(readUtente(resultSet));</span>
            }
        }
<span class="nc" id="L933">        catch(SQLException e){</span>
<span class="nc" id="L934">            throw new RuntimeException(e);</span>
<span class="nc" id="L935">        }</span>
<span class="nc" id="L936">        return MatricolaUtenti;</span>
    }

    @Override
    public List&lt;UtenteRegistrato&gt; getUtentiRuolo(String Ruolo){
<span class="nc" id="L941">        List&lt;UtenteRegistrato&gt; MatricolaUtenti = new ArrayList&lt;&gt;();</span>

        PreparedStatement statement;
        try {
<span class="nc" id="L945">            String sql =</span>
                    &quot; SELECT * &quot; +
                    &quot; FROM utente_registrato NATURAL JOIN utente &quot; +
                    &quot; WHERE Ruolo = ? &quot;;

<span class="nc" id="L950">            statement = connection.prepareStatement(sql);</span>
<span class="nc" id="L951">            statement.setString(1, Ruolo);</span>

<span class="nc" id="L953">            ResultSet resultSet = statement.executeQuery();</span>
<span class="nc bnc" id="L954" title="All 2 branches missed.">            while(resultSet.next()) {</span>
<span class="nc" id="L955">                MatricolaUtenti.add(readUtente(resultSet));</span>
            }
        }
<span class="nc" id="L958">        catch(SQLException e){</span>
<span class="nc" id="L959">            throw new RuntimeException(e);</span>
<span class="nc" id="L960">        }</span>
<span class="nc" id="L961">        return MatricolaUtenti;</span>
    }

    private UtenteRegistrato contattiRead(ResultSet resultSet){
<span class="nc" id="L965">        UtenteRegistrato contatto = new UtenteRegistrato();</span>
        try{
<span class="nc" id="L967">            contatto.setNome(resultSet.getString(&quot;Nome&quot;));</span>
        }
<span class="nc" id="L969">        catch(SQLException sql){ }</span>
        try{
<span class="nc" id="L971">            contatto.setCognome(resultSet.getString(&quot;Cognome&quot;));</span>
        }
<span class="nc" id="L973">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L975">            contatto.setCognome(resultSet.getString(&quot;Telefono&quot;));</span>
        }
<span class="nc" id="L977">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L979">            contatto.setCognome(resultSet.getString(&quot;Email&quot;));</span>
        }
<span class="nc" id="L981">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L983">            contatto.setCognome(resultSet.getString(&quot;Matricola&quot;));</span>
        }
<span class="nc" id="L985">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L987">            contatto.setLocazioneServizio(resultSet.getString(&quot;Locazione_servizio&quot;));</span>
        }
<span class="nc" id="L989">        catch (SQLException sql){ }</span>


<span class="nc" id="L992">        return contatto;</span>
    }
    private UtenteRegistrato readUtente(ResultSet resultSet){
<span class="nc" id="L995">        UtenteRegistrato user = new UtenteRegistrato();</span>

        /* Utente */
        try{
<span class="nc" id="L999">            user.setNome(resultSet.getString(&quot;Nome&quot;));</span>
        }
<span class="nc" id="L1001">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1003">            user.setCognome(resultSet.getString(&quot;Cognome&quot;));</span>
        }
<span class="nc" id="L1005">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1007">            user.setCF(resultSet.getString(&quot;CF&quot;));</span>
        }
<span class="nc" id="L1009">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1011">            user.setTelefono(resultSet.getString(&quot;Telefono&quot;));</span>
        }
<span class="nc" id="L1013">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1015">            user.setMail(resultSet.getString(&quot;Email&quot;));</span>
        }
<span class="nc" id="L1017">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1019">            user.setPassword(resultSet.getString(&quot;Password&quot;));</span>
        }
<span class="nc" id="L1021">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1023">            user.setSesso(resultSet.getString(&quot;sesso&quot;));</span>
        }
<span class="nc" id="L1025">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1027">            user.setDataNascitaString(resultSet.getDate(&quot;DataNascita&quot;).toString());</span>
        }
<span class="nc" id="L1029">        catch (SQLException sql){ sql.printStackTrace(); }</span>

        /* Utente registrato */
        try{
<span class="nc" id="L1033">            user.setMatricola(resultSet.getString(&quot;Matricola&quot;));</span>
        }
<span class="nc" id="L1035">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1037">            user.setIBAN(resultSet.getString(&quot;IBAN&quot;));</span>
        }
<span class="nc" id="L1039">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1041">            user.setRuolo(resultSet.getString(&quot;Ruolo&quot;));</span>
        }
<span class="nc" id="L1043">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1045">            user.setFoto(resultSet.getBlob(&quot;Foto&quot;));</span>
        }
<span class="nc" id="L1047">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1049">            user.setDocumento(resultSet.getBlob(&quot;Documenti&quot;));</span>

        }
<span class="nc" id="L1052">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1054">            user.setIndirizzo(resultSet.getString(&quot;Indirizzo&quot;));</span>
        }
<span class="nc" id="L1056">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1058">            user.setLocazioneServizio(resultSet.getString(&quot;Locazione_servizio&quot;));</span>
        }
<span class="nc" id="L1060">        catch (SQLException sql){ }</span>

        try{
<span class="nc" id="L1063">            user.setStipendio(resultSet.getLong(&quot;Stipendio&quot;));</span>
        }
<span class="nc" id="L1065">        catch (SQLException sql){ }</span>
        try{
<span class="nc" id="L1067">            user.setIscrittoNewsletterInt(resultSet.getInt(&quot;Iscritto_Newsletter&quot;));</span>
        }
<span class="nc" id="L1069">        catch (SQLException sql){ }</span>


<span class="nc" id="L1072">        return user;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>